<div class="container" style="max-width: 1000px; margin: 30px auto;">

  <!-- watchlist header -->
  <div class="mm-card-title">Your Watchlist</div>

  <!-- watchlist grid -->
  <div class="watchlist-grid">
    <mat-card
      class="mm-card"
      *ngFor="let item of watchlist"
      (click)="openTicker(item.ticker)" 
      style="cursor: pointer; position: relative; padding-bottom: 50px;"
    >

      <!-- ticker row with price -->
      <div style="display:flex; justify-content:space-between; align-items:center;">
        <div class="watchlist-ticker">{{ item.ticker }}</div>
        <div class="watchlist-price">
          {{ item.price ? ('$' + item.price.toFixed(2)) : 'â€”' }}
        </div>
      </div>

      <!-- sentiment title -->
      <div class="mm-card-subtitle" style="margin-top: 10px; margin-bottom: 8px;">
        Last 20 Sentiment Summary:
      </div>

      <!-- sentiment values -->
      <div style="line-height: 1.7;">
        <span class="sent-pos">
          Positive: {{ item.sentiment?.positive }}
          <span class="sent-chip pos"></span>
        </span>
        <br />

        <span class="sent-neutral">
          Neutral: {{ item.sentiment?.neutral }}
          <span class="sent-chip neu"></span>
        </span>
        <br />

        <span class="sent-neg">
          Negative: {{ item.sentiment?.negative }}
          <span class="sent-chip neg"></span>
        </span>
      </div>

      <!-- latest article snippet -->
      <div class="latest-article" *ngIf="item.latest" style="margin-top: 14px;">
        <strong>Latest:</strong><br />
        <span class="article-title">{{ item.latest.title }}</span>
        <br />

        <span
          [ngClass]="{
            'sent-pos': item.latest.sentiment === 'positive',
            'sent-neutral': item.latest.sentiment === 'neutral',
            'sent-neg': item.latest.sentiment === 'negative'
          }"
        >
          {{ item.latest.sentiment | titlecase }}
        </span>
      </div>

      <!-- delete button bottom-right -->
      <div style="
        position: absolute;
        bottom: 10px;
        right: 10px;
      ">
        <button
          mat-raised-button
          color="warn"
          style="padding: 2px 10px; font-size: 0.8rem;"
          (click)="deleteItem(item.ticker, $event)"
        >
          Delete
        </button>
      </div>

    </mat-card>
  </div>

</div>
